<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function() {  /* widget controller */  var c = this;}]]></client_script>
        <controller_as>c</controller_as>
        <css>.table{font-size:x-large;}
.table tbody tr:hover{
  font-weight:bold;
}</css>
        <data_table>sp_instance_vlist</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list>table,filter,maximum_entries,display_field,order_by,order_direction,title,color,class_name,sp_page,order</field_list>
        <has_preview>false</has_preview>
        <id>fancy_list</id>
        <internal>false</internal>
        <link/>
        <name>Fancy List</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {
	if (!options.table)
		return;
	data.sprints=[1,2,3,4,5,6];
	data.sp_page = $sp.getDisplayValue('sp_page'); // gets the page's ID
	var gr = new GlideRecordSecure(options.table); 
	if (options.filter)
		gr.addEncodedQuery(options.filter);

	if (options.order_direction == "asc")
		gr.orderBy(options.order_by);
	else
		gr.orderByDesc(options.order_by);

	gr.setLimit(options.maximum_entries);
	gr.query();
	data.list = [];
	while (gr.next()) {
		var record = {};
		record.sys_id = gr.getValue('sys_id');
		if (options.display_field)
			record.display_field = gr.getDisplayValue(options.display_field);

		if (data.sp_page)
			record.url = "?id=" + data.sp_page + "&table=" + options.table + "&sys_id=" + record.sys_id + "&view=sp";
		else
			record.url = "";

		data.list.push(record);
	}
})()]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-03-19 00:09:02</sys_created_on>
        <sys_id>fdbd60bf4ff013005cf63b718110c7e1</sys_id>
        <sys_mod_count>42</sys_mod_count>
        <sys_name>Fancy List</sys_name>
        <sys_package display_value="CISC475 Sprint Grades" source="x_195638_cisc475_s">80ae9f674f3013005cf63b718110c763</sys_package>
        <sys_policy/>
        <sys_scope display_value="CISC475 Sprint Grades">80ae9f674f3013005cf63b718110c763</sys_scope>
        <sys_update_name>sp_widget_fdbd60bf4ff013005cf63b718110c7e1</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2018-03-19 00:58:38</sys_updated_on>
        <template><![CDATA[
<div >
  <table class='table'>
    <thead>
      <tr><td>Group Member</td><td ng-repeat='sprint in data.sprints'>Sprint {{sprint}}</td></tr>
    </thead>
  <tbody>
    <tr ng-repeat="item in data.list">
      <td>
      	<a ng-href="{{item.url}}">{{item.display_field}}</a>
      </td>
      <td ng-repeat='sprint in data.sprints'>N/A</td>
    </tr>
    </tbody>
  </table>
</div>
]]></template>
    </sp_widget>
</record_update>
